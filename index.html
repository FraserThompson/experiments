<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>schway.space</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
	</head>
  	<body>
		<form onsubmit="return false;">
			<div class="container">
				<div class="row">
					<div class="twelve columns">
						<center><h1>ðŸ˜‚</h1></center>
					</div>
				</div>
				<div class="row">
					<div class="five columns">
						<fieldset>
							<label><input type="radio" name="language" value="japanese" checked>Japanese</label>
							<label><input type="radio" name="language" value="russian"> Russian</label>
							<label><input type="radio" name="language" value="uk"> UK English</label>
							<label><input type="radio" name="language" value="indian"> Indian</label>
						</fieldset>
					</div>
					<div class="five columns">
						<fieldset>
							<label><input type="radio" name="language" value="chinese"> Chinese</label>
							<label><input type="radio" name="language" value="german"> German</label>
							<label><input type="radio" name="language" value="us"> US English</label>
							<label><input type="radio" name="language" value="polish"> Polish</label>
						</fieldset>
					</div>
				</div>
				<div class="row">
				    <div class="ten columns">
						<label for="rate">Rate</label>
						<input style="width:100%;" type="range" id="rate" step="0.1" max="2" min="0.1" oninput="updateRange(this.value);"/>
					</div>
					<div class="two columns">
						<output name="rangeOutput" id="rangeOutput">1</output>
					</div>
				</div>
				<div class="row">
				    <div class="ten columns">
						<label for="pitch">Pitch</label>
						<input style="width:100%;" type="range" id="pitch" step="0.1" max="2" min="0.1" oninput="updatePitch(this.value);"/>
					</div>
					<div class="two columns">
						<output name="pitchOutput" id="pitchOutput">1</output>
					</div>
				</div>
				<div class="row">
				    <div class="ten columns">
						<input style="width: 100%" type="text" id="message" value="you used to call me on your cellphone"/>
					</div>
					<div class="two columns">
						<input type="submit" value="Talk" id="go" onclick="talk();"/>
					</div>
				</div>
			</div>
		</form>
		<button onclick="startRecognizing();"></button>
		<p id="result"></p>
		<script>

			function startRecognizing() {
				var recognition = new webkitSpeechRecognition();
				recognition.continuous = true;
				recognition.interimResults = true;

				var result = document.getElementById('result');

				recognition.onresult = function(event) { 
				  console.log(event)
				  result.innerHTML = event['results'][0][0]['transcript'];
				}

				recognition.start();
			}


			function updateRange(val) {
		      document.getElementById('rangeOutput').value=val; 
		    }

		    function updatePitch(val) {
		      document.getElementById('pitchOutput').value=val; 
		    }


			var voices = [];

			var languages = {'japanese': [11, 'ja-JP'], 'russian': [16, 'ru-RU'], 'uk': [3, 'en-GB'], 'indian': [8, 'hi-IN'], 'chinese': [17, 'zh-CN'], 'polish': [14, 'pl-PL'], 'german': [1, 'de-DE'], 'us': [2, 'en-US']};

			window.speechSynthesis.onvoiceschanged = function() {
				voices = window.speechSynthesis.getVoices();
				console.log(voices);

			    // speechSynthesis.speak(msg);
			};

			function talk() {
				var msg = new SpeechSynthesisUtterance();
				var chosenLanguage = languages[document.querySelector('input[name="language"]:checked').value]; 
			    msg.voiceURI = 'native';
			    msg.volume = 1;
			    msg.rate = document.getElementById('rate').value;
			    msg.pitch = document.getElementById('pitch').value;
			    //msg.text = 'Hello and welcome to schway.space the best place on the internet to have a good time. How are you today. The time is ' + hours + ' ' + minutes + ' and it is ' + day;
			    msg.lang = chosenLanguage[1];
			    msg.voice = voices[chosenLanguage[0]]
				msg.text = document.getElementById('message').value;
				speechSynthesis.speak(msg);
			}

	 		var weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
	    	var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
			var currentDate = new Date()
			var day = weekdays[currentDate.getDate()];
			var month = months[currentDate.getMonth()];
			var year = currentDate.getFullYear()

			var hours = currentDate.getHours();
		 	var minutes = currentDate.getMinutes();
		  	var ampm = hours >= 12 ? 'pm' : 'am';
		</script>
  	</body>
</html>
